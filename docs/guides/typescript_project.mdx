---
id: type-script-project
title: TypeScript Projects
---

import ApiLink from '@site/src/components/ApiLink';

Crawlee supports TypeScript by covering public APIs with type declarations. This
allows writing code with auto-completion for TypeScript and JavaScript code alike.
Besides that, projects written in TypeScript can take advantage of compile-time
type-checking and avoid many coding mistakes, while providing documentation for
functions, parameters and return values.

Setting up a TypeScript project
=============================

To use TypeScript in our projects, we'll need the following prerequisites.

1. TypeScript compiler `tsc` installed somewhere:

    ```shell script
    npm install --dev typescript
    ```

    TypeScript can be a development dependency in our project, as shown above. There's no
    need to pollute the production environment or the system's global repository
    with TypeScript.

2. A build script invoking `tsc` and a correctly specified `main` entry point defined
   in the `package.json`:

   ```json
   {
     "scripts": {
       "build": "tsc -p tsconfig.json"
     },
     "main": "build/main.js"
   }
   ```

3. Type declarations for NodeJS, so we can take advantage of type-checking in all the features we'll use:

   ```shell script
   npm install --dev @types/node
   ```

4. TypeScript configuration file allowing `tsc` to understand the project layout and
   the features used in the project:

   ```json
   {
       "compilerOptions": {
           "target": "es2019",
           "module": "commonjs",
           "moduleResolution": "node",
           "strict": true,
           "noImplicitAny": false,
           "strictNullChecks": false,
           "lib": [
                "DOM",
                "DOM.Iterable",
                "ES2015",
                "ES2016",
                "ES2018",
                "ES2019.Object",
                "ES2018.AsyncIterable",
                "ES2020.String",
                "ES2019.Array"
           ],
           "rootDir": "src/",
           "outDir": "build/"
       },
       "include": [
           "src/"
       ]
   }
   ```

   Place the content above inside a `tsconfig.json` in the root folder.

   Also, to enjoy using the types in `.js` source files, VSCode users that are using JavaScript should create a `jsconfig.json` with the same content and add `"checkJs": true` to `"compilerOptions"`.

Auto-completion
==============

IDE auto-completion should work in most places. That's true even for
projects written in pure JavaScript. For time constraints, we left out the amendment of an
internal API for the time being, and these need to be added as Crawlee developers write
new and enhance old code.

SDK Documentation
=================

SDK documentation has grown a lot. There is a new API Reference section **Type definitions**
that holds documentation for all constructible types, function parameters and
return types, in Crawlee.

Caveats
========

As of version 1.0+, the generated typings, due to JSDoc limitations, have some properties
and parameters annotated with `any` type, therefore the settings `noImplicitAny` and `strictNullChecks`, set to `true`, may not be advised. They could be enabled, but it might hinder development because of the need for typecasts to be able to compile, and thus our mileage may vary.

Besides the _implicit any_ errors that might occur in the code when writing in TypeScript, the
current typings doesn't offer generics that make outputs type-safe, so we need to declare our
types, as such:

```typescript
import { KeyValueStore } from 'crawlee';

interface MySchema {
    expectedParam1?: string;
    expectedParam2?: number;
}

// getInput returns Promise<Object<string, *>|string|Buffer|null> here
const input: MySchema = (await KeyValueStore.getInput()) as any;

if (!input?.expectedParam1) { // input is MySchema now and we can check in a type-safe way
    throw new Error('Missing expectedParam1');
}
```

There are other places where we need to explicitly provide our interface/type, like in Dataset iterators (`map`, `reduce`, `forEach`):

```typescript
import { Dataset } from 'crawlee';

interface ExpectedShape {
    id: string;
    someFields: Fields[];
}

const dataset = await Dataset.open();
await dataset.forEach((item: ExpectedShape) => {
    // deal with item.id / item.someFields
    // otherwise item is "any"
})
```
